<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="YUNUS EMRE KARATAS">
    <meta name="keywords" content="Akıllı Bağış Kutuları ile Kıyafet Bağış Yönetim Sistemi">

    <!--Fontavesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/CSS/style.css">
    <link rel="stylesheet" href="/CSS/clothing.css">

    <title>KıyafetBağısı.com</title>
</head>
<body>

    <!--Kullancıya ekranda seçim yapması için form göndericez-->

    <form action="/submit" id="recyle-form" method="post">
        <div class="container" id="recyle-container">
            <!--Başlık ekledik-->
            <div class="row mb-3">
                <h3 id="reycle-h3">Select Product Type</h3>
            </div>
            <!--1. satır-->
            <div class="row">
            <div class="col-sm-2">
                <label>
                    <input type="radio" name="product" value="t-shirt" id="product1" class="form-check-input">
                    <img src="/assets/tshirt.avif" alt="t-shirt" class="img-thumbnail">
                    <p>T-shirt</p>
                </label>
            </div>
            <div class="col-sm-2">
                <label>
                    <input type="radio" name="product" id="product2"  value="Shirts" class="form-check-input">
                    <img src="/assets/shirts.avif" alt="Shirts" class="img-thumbnail">
                    <p>Shirts</p>
                </label>
            </div>
            <div class="col-sm-2">
                <label>
                    <input type="radio" name="product" id="product3"  value="Trousers" class="form-check-input">
                    <img src="/assets/Trousers.avif" alt="Trousers" class="img-thumbnail">
                    <p>Trousers</p>
                </label>
            </div>
            <div class="col-sm-2">
                <label>
                    <input type="radio" name="product" id="product4"  value="Skirts" class="form-check-input">
                    <img src="/assets/skirts.avif" alt="Skirts" class="img-thumbnail">
                    <p>Skirts</p>
                </label>
            </div>
            <div class="col-sm-2">
                <label>
                    <input type="radio" name="product" id="product5"  value="Sweaters" class="form-check-input">
                    <img src="/assets/sweatshirts.avif" alt="Sweaters" class="img-thumbnail">
                    <p>Sweaters</p>
                </label>
            </div>
           
            </div>
            <!--1.satır bitiş-->
            <!--2. Satır-->
            <div class="row ">
                <div class="col-sm-2">
                    <label>
                        <input type="radio" name="product" id="product6"  value="coat" class="form-check-input">
                        <img src="/assets/mont.webp" alt="coat" class="img-thumbnail">
                        <p>Coat</p>
                    </label>
                </div>
                
                <div class="col-sm-2">
                    <label>
                        <input type="radio" name="product" id="product7"  value="accessories" class="form-check-input">
                        <img src="/assets/accessories.jfif" alt="accessories" class="img-thumbnail">
                        <p>Accessories</p>
                    </label>
                </div>
                <div class="col-sm-2">
                    <label>
                        <input type="radio" name="product" id="product8"  value="Shoes" class="form-check-input">
                        <img src="/assets/shoes.avif" alt="Shoes" class="img-thumbnail">
                        <p>Shoes</p>
                    </label>
                </div>
                
                <div class="col-sm-2">
                    <label>
                        <input type="radio" name="product" id="product9" value="blanket and quilt" class="form-check-input">
                        <img src="/assets/blanket.avif" alt="blanket and quilt" class="img-thumbnail">
                        <p>blanket and quilt</p>
                    </label>
                </div>
                <div class="col-sm-2">
                     <label>
                        <input type="radio" name="product" id="product10" value="sweatpants" class="form-check-input">
                        <img src="/assets/sweatpants.jfif" alt="sweatpants" class="img-thumbnail">
                        <p>Sweatpants</p>
                    </label>
                </div>
            </div>
            <!--2.Satır bitiş-->
        </div>

        <!-- Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close" id="close">&times;</span>
                <div id="modalText"></div> <!-- Dinamik içerik buraya gelecek --><br>
                <button type="button" class="btn btn-success" id="addbasket">Add product to cart</button>
                
            </div>
        </div>
        
        <!--sepet Modalı-->
        <div id="basketModal" class="modal">
            <div class="modal-content">
                <span class="basketClose" id="basketClose">&times;</span>
                <div id="basketModalText"></div> <!-- Dinamik içerik buraya gelecek --><br>
                <button type="submit" class="btn btn-primary" id="confirm">Confirm</button>  <!--Burada type submit olmalı çünkü database atcaz bilgileri-->
            </div>
        </div>

        <!--İleri ve Geri butonlarını yerleştirdim-->
        <div class="navigation mt-4">
            <div class="row" id="navigation-row">
                <div class="col-sm-4 col-auto nav-log"> 
                    <button type="button" class="btn btn-primary" id="back-button">
                        <span>
                            <i class="fas fa-undo-alt"></i> <!-- Fontawesome geri ikon -->
                        </span>
                    </button>
                </div>
                <div class="col-sm-4 col-auto nav-log"> 
                    <div style="position: relative; display: inline-block;">
                        <button type="button" class="btn btn-primary" id="basket-button">
                            <span>
                                <i class="fa-solid fa-basket-shopping"></i> <!-- Fontawesome sepet ikon -->
                            </span>
                        </button>
                        <span id="item-count" style="position: absolute; top: -5px; right: -10px; background-color: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
                    </div>
                </div>
                <div class="col-sm-4 col-auto nav-log">
                    <button type="button" class="btn btn-primary" id="home-button">
                        <span>
                            <i class="fa-solid fa-house"></i>
                        </span>
                    </button>
                </div>
            </div>
        </div>
        
    </form>


    <script>
        /*Ürün idlerine göre bilgileri ele aldık*/
        const p1Dom = document.getElementById('product1');
        const p2Dom = document.getElementById('product2');
        const p3Dom = document.getElementById('product3');
        const p4Dom = document.getElementById('product4');
        const p5Dom = document.getElementById('product5');
        const p6Dom = document.getElementById('product6');
        const p7Dom = document.getElementById('product7');
        const p8Dom = document.getElementById('product8');
        const p9Dom = document.getElementById('product9');
        const p10Dom = document.getElementById('product10');

        /*modal ,span ve text içinde değişim olacağından dolayı bilgileri ele alcaz*/
        const modalDom = document.getElementById('myModal');
        const closeSpanDom = document.getElementsByClassName('close')[0];
        const modalTextDom = document.getElementById('modalText');
        const colorDom = document.getElementById('color');
        const accersorriesDom = document.getElementById('accesorries');
        const sizeDom = document.getElementById('size')
        const wearDom = document.getElementById('usability');
        const reasonDom = document.getElementById('reason');
        

        /*Kod uzamasın diye arrayler oluştururarak burdan daha kısa çözülebileceiğini düşündüm*/
        const sameProduct = [p1Dom, p2Dom, p5Dom, p6Dom, p10Dom];
        const sameproduct2 =[p3Dom,p4Dom]; // pantollar ve etekler için

        //basketmodal için
        const basketModalDom = document.getElementById('basketModal');
        const basketCloseSpanDom = document.getElementsByClassName('basketClose')[0];
        const basketModalTextDom = document.getElementById('basketModalText');



       function openModal(product){
        modalDom.style.display="block";
        modalTextDom.innerHTML=`
       <label for="fabric-type">Fabric Type:</label>
        <select name="fabric-type" id="fabric-type">
            <option value="Cotton">Cotton</option>
            <option value="Polyester">Polyester</option>
            <option value="Wool">Wool</option>
            <option value="Silk">Silk</option>
            <option value="Linen">Linen</option>
            <option value="Denim">Denim</option>
            <option value="Rayon">Rayon</option>
            <option value="Spandex">Spandex</option>
            <option value="Nylon">Nylon</option>
            <option value="Acrylic">Acrylic</option>
            <option value="Velvet">Velvet</option>
            <option value="Satin">Satin</option>
        </select>
        <br><br>
        <label for="reason">Reason for donation:</label>
        <select name="reason" id="reason">
            <option value="Torn">Torn</option>
            <option value="Patchy">Patchy</option>
            <option value="Color Change">Color Change</option>
            <br><br>
        </select>`;
       }

       sameProduct.forEach(product => {
            product.addEventListener('change',function(){
                if(product.checked){ /*Daima tıklandımı diye kontrol etmeliyiz*/
                    openModal(product); //function called
                }
            });
       });

       //pantol ve etekler için function
       function openModal2(product){
            modalDom.style.display="block";
            modalTextDom.innerHTML=`
         <label for="fabric-type">Fabric Type:</label>
        <select name="fabric-type" id="fabric-type">
            <option value="Cotton">Cotton</option>
            <option value="Polyester">Polyester</option>
            <option value="Wool">Wool</option>
            <option value="Silk">Silk</option>
            <option value="Linen">Linen</option>
            <option value="Denim">Denim</option>
            <option value="Rayon">Rayon</option>
            <option value="Spandex">Spandex</option>
            <option value="Nylon">Nylon</option>
            <option value="Acrylic">Acrylic</option>
            <option value="Velvet">Velvet</option>
            <option value="Satin">Satin</option>
        </select>
        <br><br>
        <label for="reason">Reason for donation:</label>
        <select name="reason" id="reason">
            <option value="Torn">Torn</option>
            <option value="Patchy">Patchy</option>
            <option value="Color Change">Color Change</option>
            <br><br>
        </select>`;

            
       }

       sameproduct2.forEach(product => {
        product.addEventListener('change',function(){
            if(product.checked){ //kontrol yapıldı
                openModal2(product);
            }
            });
       });

    
       p7Dom.addEventListener('change',function(){
            if(p7Dom.checked){//kontrol yaptık yine
                modalDom.style.display="block";
                modalTextDom.innerHTML=`
            <label for="material">Material:</label>
        <select name="material" id="material">
            <option value="leather">Leather</option>
            <option value="Plastic">Plastic</option>
            <option value="Leather">Leather</option>
            <option value="Fabric">Fabric</option>
        </select><br><br>
        <label for="reason">Reason for donation:</label>
        <select name="reason" id="reason">
            <option value="Torn">Torn</option>
            <option value="Patchy">Patchy</option>
            <option value="Color Change">Color Change</option>
            <br><br>
        </select>`;
        }
       });
       
       p8Dom.addEventListener('change',function(){
            if(p8Dom.checked){
                modalDom.style.display="block";
                modalTextDom.innerHTML=` 
            <label for="material">Material:</label>
            <select name="material" id="material">
                <option value="leather">Leather</option>
                <option value="suede">Suede</option>
                <option value="synthetic">Synthetic</option>
                <option value="rubber">Rubber</option>
                <option value="fabric">Fabric</option>
            </select><br><br>
        <label for="reason">Reason for donation:</label>
        <select name="reason" id="reason">
            <option value="Torn">Torn</option>
            <option value="Patchy">Patchy</option>
            
            
            <option value="Color Change">Color Change</option>
            <br><br>
        </select>`;
            }
       })

       p9Dom.addEventListener('change',function(){
            if(p9Dom.checked){ //kontrol ettimm
                modalDom.style.display="block";
                modalTextDom.innerHTML=`
              <label for="material">Material:</label>
            <select name="material" id="material">
                  <option value="cotton">Cotton</option>
                <option value="wool">Wool</option>
                <option value="synthetic">Synthetic</option>
                <option value="fleece">Fleece</option>
                <option value="silk">Silk</option>
            </select><br><br> 
            <label for="reason">Reason for donation:</label>
            <select name="reason" id="reason">
                <option value="Torn">Torn</option>
                <option value="Patchy">Patchy</option>

                    
                    
                <option value="Color Change">Color Change</option>

                <br><br>
            </select>`

            }
       });

    //sepet butonuna tıklayınca modal açılsın yine 
    document.getElementById('basket-button').addEventListener('click',function(){
        
        basketModalDom.style.display="block"; //burada basket modalı açtık 
    });
    
   

    // Kullanıcı (x) işaretine basarsa modal kapanıyor
    closeSpanDom.onclick = function() { // Parantezlerden kurtar
        modalDom.style.display = "none";
       
    };

    basketCloseSpanDom.onclick = function() {
        basketModalDom.style.display="none";
    }


// Kullanıcı modal kutusunun dışına tıklarsa modal kapanıyor
    window.onclick = function (event) {
        if (event.target === modalDom) {
            modalDom.style.display = "none";
        }else if(event.target === basketModalDom){
            basketModalDom.style.display="none";
        }
    };


let infoarray = []; // Sepetteki ürünleri tutcak donation için
console.log(infoarray);// buda geri dönüşümdeki kıyafetleri tutucak 
let counter = 0;

document.getElementById('addbasket').addEventListener('click', function() {
    let selectedProductId = document.querySelector('input[name="product"]:checked').id; // Seçili ürün ID'si
    let selectedProductValue = document.querySelector('input[name="product"]:checked').value; // Seçili ürünün value değeri


    //let product = { name: '', size: '', color: '', wearability: ''};
    let product = {name:'',FabricType:'',ReasonForDonation: ''};

    // Ürün ID'sine göre işlem yapıyoruz
    if (selectedProductId === 'product1' || 
        selectedProductId === 'product2' ||
        selectedProductId === 'product3' || 
        selectedProductId === 'product4' ||
        selectedProductId === 'product5' || 
        selectedProductId === 'product6' ||
        selectedProductId === 'product10') {
        
        // Burada product'a bilgileri atıyoruz
        product = {
            name: selectedProductValue,
            FabricType:document.querySelector('select[name="fabric-type"]').value,
            /*size: document.querySelector('select[name="size"]').value, // Boyut bilgisini al
            color: document.querySelector('select[name="color"]').value, // Renk bilgisini al
            wearability: document.querySelector('select[name="usability"]').value, // 'usability' olarak erişim*/
            reason:document.querySelector('select[name ="reason"]').value
        };
       

        // Ürünü sepete ekle

        infoarray.push(product);
        counter++;
        modalDom.style.display="none";
        
        
        

    } else if (selectedProductId === 'product7') {
        
        product = {
            name: selectedProductValue,
            FabricType:null,
            material:document.querySelector('select[name="material"]').value,
            reason:document.querySelector('select[name ="reason"]').value
            //size: null, // Boyut bilgisini al
            //color: document.querySelector('select[name="color"]').value, // Renk bilgisini al
            //wearability: document.querySelector('select[name="usability"]').value // 'usability' olarak erişim
        };

        // Aksesuarı sepete ekle
        infoarray.push(product);
        counter++;
        modalDom.style.display="none";
        
       
        

    }else if(selectedProductId ==='product9'){
        

        product={
            name :selectedProductValue,
            FabricType:null,
            material:document.querySelector('select[name="material"]').value,
            reason:document.querySelector('select[name ="reason"]').value
        }
         // Aksesuarı sepete ekle
        infoarray.push(product);
        counter++;
        modalDom.style.display="none";
    }else if(selectedProductId ==='product8'){
      
        
        product={
            name:selectedProductValue,
            FabricType:null,
            material:document.querySelector('select[name="material"]').value,
            reason:document.querySelector('select[name="reason"]').value

        }
         // Aksesuarı sepete ekle
         infoarray.push(product);
         counter++;
         modalDom.style.display="none";
    }

    // Sepeti güncelliyoruz
    updateBasket();
    
});

// Sepet güncelleme fonksiyonu
function updateBasket() {
    console.log(infoarray); // Sepetteki ürünleri kontrol et
    document.getElementById('basketModalText').innerHTML = ''; // Burada içini temizledik.

    infoarray.forEach((item, index) => {
        let itemText = `${index + 1}. ${item.name}`;
        if (item.FabricType) itemText += ` -- Fabric-Type: ${item.FabricType}`;
        if (item.material) itemText += ` -- Material: ${item.material}`;
        if (item.reason) itemText += ` -- Reason: ${item.reason}`;
        document.getElementById('basketModalText').innerHTML += `<p>${itemText}</p>`; // Burada başta oluşturduğum itemText'e eklemeler yaptık ve en son halini gösterdim
    });

    // Sepetteki ürün sayısını güncelle
    document.getElementById('item-count').innerText = counter;
}

    </script>
    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/JS/script.js"></script>
    <script src="/JS/reycle.js"></script>
</body>
</html>
